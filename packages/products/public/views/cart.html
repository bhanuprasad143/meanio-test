<div data-ng-controller="CartController" data-ng-init="allItems()">
  <h1>Shopping Cart</h1>

  <table class="table table-striped" >
    <thead>
      <tr>
        <th>
          Name
        </th>
        <th>
          Price
        </th>
        <th>
          Qty
        </th>
        <th>
          Total
        </th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr data-ng-repeat="(key, item) in items">
        <td>{{item.name}}</td>
        <td>${{(item.price_in_cents/100.0).toFixed(2)}}</td>
        <td>
          <input type="number" min='1' value="{{item.quantity}}" ng-model="item.quantity" ng-change="watchChange()"/>
        </td>
        <td>${{(item.price_in_cents*item.quantity/100.0).toFixed(2)}}</td>
        <td>
          <a class='btn btn-danger' ng-click="removeItem(item)">REMOVE</a>
        </td>
      </tr>
      <tr>
        <td colspan='4'>
          <div class='pull-right' data-ng-hide="shoppingCart.count() < 1">

            <a class="btn btn-primary" ng-click="updateCart()" ng-disabled="!changed">UPDATE</a>
            <a href="/#!/checkout" class='btn btn-success' ng-disabled="shoppingCart.count() < 10 || changed"> CHECKOUT </a> 
            
          </div>

          <div class='pull-right' data-ng-hide="shoppingCart.count() > 0">
            SHOPPING CART IS EMPTY
            <a class='btn btn-success' href="/#!/products"  >GO TO SHOPPING</a>
            
          </div>

        </td>
        <td></td>
      </tr>
    </tbody>
  </table>

</div>